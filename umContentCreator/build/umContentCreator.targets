<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

	<PropertyGroup>
		<UmContentCreatorFilesPath>$(MSBuildThisFileDirectory)..\App_Plugins\UmContentCreator\**\*.*</UmContentCreatorFilesPath>
		<LoadingGifPath>$(MSBuildThisFileDirectory)..\loading.gif</LoadingGifPath>
	</PropertyGroup>
	
	<Target Name="CopyUmContentCreatorFiles" BeforeTargets="Build">
		<ItemGroup>
			<UmContentCreatorFiles Include="$(UmContentCreatorFilesPath)" />
		</ItemGroup>
		
		<Message Text="Copying Um Content Creator files: $(UmContentCreatorFilesPath) - #@(UmContentCreatorFiles->Count()) files" Importance="high" />
		
		<Copy 
			SourceFiles="@(UmContentCreatorFiles)"
			DestinationFiles="@(UmContentCreatorFiles->'$(MSBuildProjectDirectory)\App_Plugins\UmContentCreator\%(RecursiveDir)%(Filename)%(Extension)')"
			SkipUnchangedFiles="true" />
	</Target>

	<Target Name="CopyLoadingGifFile" BeforeTargets="Build">
		<ItemGroup>
			<LoadingGifFile Include="$(LoadingGifPath)" />
		</ItemGroup>

		<Message Text="Copying loading gif file: $(LoadingGifPath) - #@(LoadingGifFile->Count()) files" Importance="high" />

		<Copy
			SourceFiles="@(LoadingGifFile)"
			DestinationFiles="@(LoadingGifFile->'$(MSBuildProjectDirectory)\wwwroot\loading%(Extension)')"
			SkipUnchangedFiles="true" />
	</Target>

	<Target Name="ClearUmContentCreatorFiles" BeforeTargets="Clean">
		<ItemGroup>
			<UmContentCreatorDir Include="$(MSBuildProjectDirectory)\App_Plugins\UmContentCreator\" />
		</ItemGroup>
		<Message Text="Clear old UmContentCreator data" Importance="high" />
		<RemoveDir Directories="@(UmContentCreatorDir)" />
	</Target>
	
</Project>